
# Start

## 一、Javascript

### 1.1 核心语言特性

语言的普适性。

> 一些中等规模的网络应用。这些应用基于现代的模型—视图—控制器（`Model—View—Controller`, `MVC`）框架，并且还有相应的移动应用供 `iOS` 和 `Android` 用户使用。而 `JavaScript` 可以实现能够同时在 `Linux`、`Windows` 和 `OS X` 上运行的桌面应用，甚至着手将其改为完全基于云的无服务器的版本。

`JavaScript` 与其它语言的根本性差异：

- 函数是一等公民（一级对象）
  - 在 `JavaScript` 中，函数与其他对象共存，并且能够像任何其他对象一样地使用。函数可以通过字面量创建，可以赋值给变量，可以作为函数参数进行传递，甚至可以作为返回值从函数中返回。

- 函数闭包
  - 大部分人对闭包都缺乏理解，然而它却从根本上例证了函数之于 `JavaScript` 的重要性。
  - 当函数主动维护了在函数内使用的外部的变量，则该函数为一个`闭包`。

- 作用域
  - 直到最近，`JavaScript` 都还没有（类似 `C` 语言中的）块级作用域下的变量，取而代之则只能依赖函数级别的变量和全局变量。

- 基于`原型`的`面向对象`
  - 不同于其他主流的面向对象语言（例如 `C#`、`Java`、`Ruby`）使用基于类的面向对象，`JavaScript` 使用基于原型的面向对象。

`对象`、`原型`、`函数` 和 `闭包` 的紧密结合组成了 `JavaScript`。

`JavaScript` 特性：

- 生成器
  - 一种可以基于一次请求生成多次值的函数，在不同请求之间也能挂起执行。

- `Promise`
  - 让我们更好地控制异步代码。
  - `async`, `await`, `Promise.all()`

- 代理
  - 让我们控制对特定对象的访问。

- 高级数组方法
  - 书写更优雅的数组处理函数。
  - `pop`, `push`, `shift`, `unshift`, `reverse`, `splice`,  `sort`, `fill`, `copyWithin`
  - `concat`, `includes`, `join`, `slice`, `indexOf`, `lastIndexOf`, `toString`
  - `forEach`, `filter`, `map`, `entries`, `find`, `findIndex`, `reduce`, `every`, `some`, `keys`, `values`

- 字符串方法
  - `charAt`, `concat`, `includes`, `startWith`, `endWith`, `indexOf`, `lastIndexOf`, `math`, `repeat`, `replace`, `search`, `slice`, `split`, `substr`, `substring`

- `Map`，用于创建字典集合；`Set`，处理仅包含不重复项目的集合。

- 正则表达式
  - 简化用代码书写起来很复杂的逻辑。

- 模块
  - 把代码划分为较小的可以自包含的片段，使项目更易于管理。

### 1.2 Javascript引擎核心要素

> 由于 `JavaScript` 代码必须由 `JavaScript` 引擎来执行，所以我们必须耐心等待心爱的引擎更新，从而能支持那些令人激动的新特性。

如今的转换编译器已经能让我们体验未来的 `JavaScript`

解决这个问题的方式之一是使用转换编译器 `transpilers`（即“转换器+编译器”,“`transformation` + `compiling`”），这类工具能够把最前沿的 `JavaScript` 代码转换为等价的（如果不能实现，则使用相似的）能在当前浏览器中运行的代码。

最流行的转换编译器是 `Traceur` 和 `Babel`。

### 1.3 浏览器

- (一)文档对象模型（`DOM`）
  - `DOM` 是 `Web` 应用的结构化的UI表现形式，至少最初由 `Web` 应用的 `HTML` 代码构成。

其中，浏览器架构和Node.js架构又略有区别：

> 浏览器

- 文档构成
  - `HTML`
  - `CSS`
  - `JS`
- 浏览器 `API`
  - `DOM`
  - 事件
  - 计时器

> `Node.js`

- 文档构成
  - `JS`
- `Node API`
  - `IO`
  - 事件
  - 计时器

- (二)事件
  - 大部分 `JavaScript` 应用都是事件驱动的应用，这表示大部分代码执行在对某个特殊事件响应的上下文中。这样的事件例如网络事件、计时器、用户生成事件例如点击、鼠标移动、键盘按压事件等。

- (三)浏览器 `API`
  - 帮助我们与世界交互，浏览器提供获取设备的信息、存储本地数据或与远程浏览器交互的 `API`。

现前端焦聚于探索跨浏览器开发的策略。

### 1.4 使用当前的最佳实践

开发者所证明能够开发出高质量代码的特质。这些特质被称为最佳实践，所以你除了精通JavaScript语言以外，还需要具有以下特质：

- 调试技巧；
- 测试；
- 性能分析。

在编程中把这些技能有效结合在一起非常重要。

#### 调试

使用开发者工具

#### 测试

测试主要是一个断言函数，其目的在于断定某个假设是真值还是假值。

#### 性能分析

```js
let maxCount = 10000;
console.time("my operation");

for (let n = 0; n < maxCount; n++) {
  /*perform the operation to be measured*/
}

console.log("my operation");
```

### 1.5 提高跨平台开发能力

> 初入Web开发行业时，会发现每个浏览器都有一套自己的脚本及UI样式的解释方式，并试图鼓吹他们的方式才是最好的方式，这使开发者们沮丧地咬牙切齿。好在浏览器之争以HTML、CSS, DOM、API和JavaScript的标准化而结束，从而开发者能集中精力开发高效的跨浏览器JavaScript应用。

现如今应用类型：

- 桌面应用
  - 通过使用如 `NW.js（http://nwjs.io/）或Electron（http://electron.atom.io/）`的库可以开发桌面应用。

- 移动应用
  - 使用类似`ApacheCordova（https://cordova.apache.org/）`的框架开发。与使用`Web`技术构建桌面应用一样，该应用框架也包装了浏览器，不过其中还包含一些额外的针对特定平台的`API`，从而让开发者能与移动平台交互。

- 使用`Node.js`开发服务器端应用和嵌入式应用
  - `Node.js`是源自于浏览器的环境，使用了很多类似浏览器的底层原理。

## 二、运行时的页面构建过程

### 2.1 Web应用生命周期

#### 生命周期概览

① 用户输入 `URL` ->
② 浏览器生成请求并发送至服务器 ->
③ 服务器执行动作或获取资源，将响应发送到客户端 ->
④ 浏览器处理 `HTML`, `CSS`, `JS` 并构建结果页面 ->
⑤ 浏览器监控事件队列，处理事件 ->
⑥ 用户与页面元素交互 ->
⑦ 用户关闭 `web` 界面

#### 页面构建阶段

构建页面阶段：

① 解析 `HTML` 并构建文档对象模型（`DOM`）->
② 执行 `JS` 代码

- `JavaScript` 中的全局对象

浏览器暴露给 `JavaScript` 引擎的主要全局对象是 `window` 对象，它代表了包含着一个页面的窗口。

全局 `window` 对象最重要的属性是 `document`，它代表了当前页面的 `DOM`。

#### 事件处理阶段

> 浏览器执行环境的核心思想基于：同一时刻只能执行一个代码片段，即所谓的单线程执行模型。

① 页面渲染后浏览器进入一个循环，浏览器监控事件队列，等待事件发生 =>
② 用户与页面元素进行交互 =>
③ 发生后调用事件处理器

应用的生命周期随着用户关掉浏览器或者离开页面结束。
